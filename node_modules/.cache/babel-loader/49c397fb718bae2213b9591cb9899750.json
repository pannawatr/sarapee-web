{"ast":null,"code":"import _objectSpread from\"/Users/net/Documents/Work/Website/sarapee-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/net/Documents/Work/Website/sarapee-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/net/Documents/Work/Website/sarapee-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/net/Documents/Work/Website/sarapee-web/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{Container,Col,Row,Form,FloatingLabel,Table,Button,DropdownButton,Dropdown}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{db}from\"../../Config\";import{collection,doc,getDocs,query,snapshotEqual,updateDoc,where}from\"firebase/firestore\";import{connectAuthEmulator}from\"firebase/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchForm(){// DB\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),usersIcf=_useState4[0],setUsersIcf=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),searchItem=_useState6[0],setSearchItem=_useState6[1];var colRef=collection(db,\"users\");useEffect(function(){// const q = query(colRef, where(\"idCard\", \"==\", searchItem));\nvar getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(colRef);case 2:data=_context.sent;setUsers(data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();getUsers();},[]);// Get DB ID\nreturn/*#__PURE__*/_jsxs(Container,{className:\"p-3\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{lg:9,children:[/*#__PURE__*/_jsx(FloatingLabel,{controlId:\"floatingInputGrid\",label:\"\\u0E40\\u0E25\\u0E02\\u0E1A\\u0E31\\u0E15\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E0A\\u0E32\\u0E0A\\u0E19\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\" \",style:{borderRadius:\"15px\"}})}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(Col,{lg:3,children:[/*#__PURE__*/_jsx(FloatingLabel,{controlId:\"floatingSelect\",label:\"\\u0E23\\u0E39\\u0E1B\\u0E41\\u0E1A\\u0E1A\",children:/*#__PURE__*/_jsxs(Form.Select,{style:{borderRadius:\"15px\"},children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u0E04\\u0E48\\u0E32\\u0E40\\u0E23\\u0E34\\u0E48\\u0E21\\u0E15\\u0E49\\u0E19\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0E40\\u0E23\\u0E35\\u0E22\\u0E07\\u0E15\\u0E32\\u0E21\\u0E1A\\u0E31\\u0E15\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E0A\\u0E32\\u0E0A\\u0E19\"})]})}),/*#__PURE__*/_jsx(\"br\",{})]})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:12,children:/*#__PURE__*/_jsxs(Table,{responsive:\"md\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0E40\\u0E25\\u0E02\\u0E1A\\u0E31\\u0E15\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E0A\\u0E32\\u0E0A\\u0E19\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"10%\"},children:\"\\u0E15\\u0E33\\u0E1A\\u0E25\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0E0A\\u0E37\\u0E48\\u0E2D-\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0E04\\u0E27\\u0E32\\u0E21\\u0E1E\\u0E34\\u0E01\\u0E32\\u0E23\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"12%\"},children:\"\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19 BI\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"13%\"},children:\"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\\u0E01\\u0E32\\u0E22\\u0E20\\u0E32\\u0E1E\\u0E1A\\u0E33\\u0E1A\\u0E31\\u0E14\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"13%\"},children:\"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\\u0E1A\\u0E33\\u0E1A\\u0E31\\u0E14\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"10%\"},children:\"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19 ICF\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"12%\"}})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){var updateRef=doc(db,\"users\",user.id);var subcollection=collection(updateRef,\"icf\");var gd=getDocs(subcollection).then(function(snap){updateDoc(updateRef,{countIcf:snap.size});});return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.idCard}),/*#__PURE__*/_jsx(\"td\",{children:user.subDistrict}),/*#__PURE__*/_jsxs(\"td\",{children:[user.fname,\" \",user.lname]}),/*#__PURE__*/_jsx(\"td\",{children:user.disability}),/*#__PURE__*/_jsx(\"td\",{children:user.biScore?user.biScore:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E44\\u0E14\\u0E49\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E44\\u0E14\\u0E49\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E44\\u0E14\\u0E49\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"})}),/*#__PURE__*/_jsx(\"td\",{children:user.countIcf!=0?\"กรอกข้อมูลแล้ว\":\"ยังไม่ได้กรอกข้อมูล\"}),/*#__PURE__*/_jsx(\"td\",{children:user.countIcf!=0?/*#__PURE__*/_jsxs(DropdownButton,{id:\"dropdown-item-button\",className:\"w-100\",variant:\"primary\",title:\"\\u0E14\\u0E39\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\",style:{borderRadius:\"15px\",padding:\".5rem\"},children:[/*#__PURE__*/_jsx(Dropdown.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/infopatient/\".concat(user.id),activeClassName:\"active\",style:{textDecoration:\"none\",color:\"black\"},children:\"\\u0E14\\u0E39\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"})}),/*#__PURE__*/_jsx(Dropdown.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/Icfinfo/\".concat(user.id),activeClassName:\"active\",style:{textDecoration:\"none\",color:\"black\"},children:\"ICF\"})}),/*#__PURE__*/_jsx(Dropdown.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/bi/\".concat(user.id),activeClassName:\"active\",style:{textDecoration:\"none\",color:\"black\"},children:\"BI\"})})]}):/*#__PURE__*/_jsxs(DropdownButton,{id:\"dropdown-item-button\",className:\"w-100\",variant:\"primary\",title:\"\\u0E14\\u0E39\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\",style:{borderRadius:\"15px\",padding:\".5rem\"},children:[/*#__PURE__*/_jsx(Dropdown.Item,{as:Link,to:\"/infopatient/\".concat(user.id),children:/*#__PURE__*/_jsx(Link,{to:\"/infopatient/\".concat(user.id),activeClassName:\"active\",style:{textDecoration:\"none\",color:\"black\"},children:\"\\u0E14\\u0E39\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"})}),/*#__PURE__*/_jsx(Dropdown.Item,{as:Link,to:\"/bi/\".concat(user.id),children:/*#__PURE__*/_jsx(Link,{to:\"/bi/\".concat(user.id),activeClassName:\"active\",style:{textDecoration:\"none\",color:\"black\"},children:\"BI\"})}),/*#__PURE__*/_jsx(Dropdown.Item,{as:Link,to:\"/imagethrapy/\".concat(user.id),children:/*#__PURE__*/_jsx(Link,{to:\"/imagethrapy/\".concat(user.id),activeClassName:\"active\",style:{textDecoration:\"none\",color:\"black\"},children:\"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\\u0E01\\u0E32\\u0E22\\u0E20\\u0E32\\u0E1E\\u0E1A\\u0E33\\u0E1A\\u0E31\\u0E14\"})}),/*#__PURE__*/_jsx(Dropdown.Item,{as:Link,to:\"/occupationalthrapy/\".concat(user.id),children:/*#__PURE__*/_jsx(Link,{to:\"/occupationalthrapy/\".concat(user.id),activeClassName:\"active\",style:{textDecoration:\"none\",color:\"black\"},children:\"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\\u0E1A\\u0E33\\u0E1A\\u0E31\\u0E14\"})}),/*#__PURE__*/_jsx(Dropdown.Item,{as:Link,to:\"/Icfinfo/\".concat(user.id),children:/*#__PURE__*/_jsx(Link,{to:\"/Icfinfo/\".concat(user.id),activeClassName:\"active\",style:{textDecoration:\"none\",color:\"black\"},children:\"ICF\"})})]})})]});})})]})})})]});}export default SearchForm;","map":{"version":3,"sources":["/Users/net/Documents/Work/Website/sarapee-web/src/Components/SearchForm/SearchForm.js"],"names":["React","useState","useEffect","Container","Col","Row","Form","FloatingLabel","Table","Button","DropdownButton","Dropdown","Link","db","collection","doc","getDocs","query","snapshotEqual","updateDoc","where","connectAuthEmulator","SearchForm","users","setUsers","usersIcf","setUsersIcf","searchItem","setSearchItem","colRef","getUsers","data","docs","map","id","borderRadius","width","user","updateRef","subcollection","gd","then","snap","countIcf","size","idCard","subDistrict","fname","lname","disability","biScore","padding","textDecoration","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport {\n  Container,\n  Col,\n  Row,\n  Form,\n  FloatingLabel,\n  Table,\n  Button,\n  DropdownButton,\n  Dropdown,\n} from \"react-bootstrap\";\n\nimport { Link } from \"react-router-dom\";\n\nimport { db } from \"../../Config\";\nimport {\n  collection,\n  doc,\n  getDocs,\n  query,\n  snapshotEqual,\n  updateDoc,\n  where,\n} from \"firebase/firestore\";\nimport { connectAuthEmulator } from \"firebase/auth\";\nfunction SearchForm() {\n  // DB\n  const [users, setUsers] = useState([]);\n  const [usersIcf, setUsersIcf] = useState([]);\n  const [searchItem, setSearchItem] = useState(\"\");\n\n  const colRef = collection(db, \"users\");\n\n  useEffect(() => {\n    // const q = query(colRef, where(\"idCard\", \"==\", searchItem));\n    const getUsers = async () => {\n      const data = await getDocs(colRef);\n      setUsers(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\n    };\n    getUsers();\n  }, []);\n\n  // Get DB ID\n\n  return (\n    <Container className=\"p-3\">\n      <Row>\n        <Col lg={9}>\n          <FloatingLabel controlId=\"floatingInputGrid\" label=\"เลขบัตรประชาชน\">\n            <Form.Control\n              type=\"text\"\n              placeholder=\" \"\n              style={{ borderRadius: \"15px\" }}\n            />\n          </FloatingLabel>\n          <br></br>\n        </Col>\n        <Col lg={3}>\n          <FloatingLabel controlId=\"floatingSelect\" label=\"รูปแบบ\">\n            <Form.Select style={{ borderRadius: \"15px\" }}>\n              <option>ค่าเริ่มต้น</option>\n              <option>เรียงตามบัตรประชาชน</option>\n            </Form.Select>\n          </FloatingLabel>\n          <br></br>\n        </Col>\n      </Row>\n      <Row>\n        <Col lg={12}>\n          <Table responsive=\"md\">\n            <thead>\n              <tr>\n                <th>เลขบัตรประชาชน</th>\n                <th style={{ width: \"10%\" }}>ตำบล</th>\n                <th>ชื่อ-นามสกุล</th>\n                <th>ความพิการ</th>\n                <th style={{ width: \"12%\" }}>คะแนน BI</th>\n                <th style={{ width: \"13%\" }}>ประเมินกายภาพบำบัด</th>\n                <th style={{ width: \"13%\" }}>ประเมินกิจกรรมบำบัด</th>\n                <th style={{ width: \"10%\" }}>ประเมิน ICF</th>\n                <th style={{ width: \"12%\" }}></th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => {\n                const updateRef = doc(db, \"users\", user.id);\n                const subcollection = collection(updateRef, \"icf\");\n                const gd = getDocs(subcollection).then((snap) => {\n                  updateDoc(updateRef, {\n                    countIcf: snap.size,\n                  });\n                });\n                return (\n                  <tr>\n                    <td>{user.idCard}</td>\n                    <td>{user.subDistrict}</td>\n                    <td>\n                      {user.fname} {user.lname}\n                    </td>\n                    <td>{user.disability}</td>\n                    <td>\n                      {user.biScore ? user.biScore : <p>ยังไม่ได้กรอกข้อมูล</p>}\n                    </td>\n                    <td>\n                      <p>ยังไม่ได้กรอกข้อมูล</p>\n                    </td>\n                    <td>\n                      <p>ยังไม่ได้กรอกข้อมูล</p>\n                    </td>\n                    <td>\n                      {user.countIcf != 0\n                        ? \"กรอกข้อมูลแล้ว\"\n                        : \"ยังไม่ได้กรอกข้อมูล\"}\n                    </td>\n                    <td>\n                      {user.countIcf != 0 ? (\n                        <DropdownButton\n                          id=\"dropdown-item-button\"\n                          className=\"w-100\"\n                          variant=\"primary\"\n                          title=\"ดูข้อมูล\"\n                          style={{ borderRadius: \"15px\", padding: \".5rem\" }}\n                        >\n                          <Dropdown.Item>\n                            <Link\n                              to={`/infopatient/${user.id}`}\n                              activeClassName=\"active\"\n                              style={{ textDecoration: \"none\", color: \"black\" }}\n                            >\n                              ดูข้อมูล\n                            </Link>\n                          </Dropdown.Item>\n                          <Dropdown.Item>\n                            <Link\n                              to={`/Icfinfo/${user.id}`}\n                              activeClassName=\"active\"\n                              style={{ textDecoration: \"none\", color: \"black\" }}\n                            >\n                              ICF\n                            </Link>\n                          </Dropdown.Item>\n                          <Dropdown.Item>\n                            <Link\n                              to={`/bi/${user.id}`}\n                              activeClassName=\"active\"\n                              style={{ textDecoration: \"none\", color: \"black\" }}\n                            >\n                              BI\n                            </Link>\n                          </Dropdown.Item>\n                        </DropdownButton>\n                      ) : (\n                        <DropdownButton\n                          id=\"dropdown-item-button\"\n                          className=\"w-100\"\n                          variant=\"primary\"\n                          title=\"ดูข้อมูล\"\n                          style={{ borderRadius: \"15px\", padding: \".5rem\" }}\n                        >\n                          <Dropdown.Item\n                            as={Link}\n                            to={`/infopatient/${user.id}`}\n                          >\n                            <Link\n                              to={`/infopatient/${user.id}`}\n                              activeClassName=\"active\"\n                              style={{ textDecoration: \"none\", color: \"black\" }}\n                            >\n                              ดูข้อมูล\n                            </Link>\n                          </Dropdown.Item>\n                          <Dropdown.Item as={Link} to={`/bi/${user.id}`}>\n                            <Link\n                              to={`/bi/${user.id}`}\n                              activeClassName=\"active\"\n                              style={{ textDecoration: \"none\", color: \"black\" }}\n                            >\n                              BI\n                            </Link>\n                          </Dropdown.Item>\n                          <Dropdown.Item\n                            as={Link}\n                            to={`/imagethrapy/${user.id}`}\n                          >\n                            <Link\n                              to={`/imagethrapy/${user.id}`}\n                              activeClassName=\"active\"\n                              style={{ textDecoration: \"none\", color: \"black\" }}\n                            >\n                              ประเมินกายภาพบำบัด\n                            </Link>\n                          </Dropdown.Item>\n                          <Dropdown.Item\n                            as={Link}\n                            to={`/occupationalthrapy/${user.id}`}\n                          >\n                            <Link\n                              to={`/occupationalthrapy/${user.id}`}\n                              activeClassName=\"active\"\n                              style={{ textDecoration: \"none\", color: \"black\" }}\n                            >\n                              ประเมินกิจกรรมบำบัด\n                            </Link>\n                          </Dropdown.Item>\n                          <Dropdown.Item as={Link} to={`/Icfinfo/${user.id}`}>\n                            <Link\n                              to={`/Icfinfo/${user.id}`}\n                              activeClassName=\"active\"\n                              style={{ textDecoration: \"none\", color: \"black\" }}\n                            >\n                              ICF\n                            </Link>\n                          </Dropdown.Item>\n                        </DropdownButton>\n                      )}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </Table>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default SearchForm;\n"]},"metadata":{},"sourceType":"module"}